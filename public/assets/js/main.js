/*! {Project Title} - v0.1.0 - Brothers & Company
    [WARNING] This file is auto-generated.
    Do not edit this file. All changes will be lost on next compilation! */

// ====================================================================================================
// FILE: /source/js/libs/mediaCheck.js
// ====================================================================================================

/*                    _ _        ____ _               _
   _ __ ___   ___  __| (_) __ _ / ___| |__   ___  ___| | __
  | '_ ` _ \ / _ \/ _` | |/ _` | |   | '_ \ / _ \/ __| |/ /
  | | | | | |  __/ (_| | | (_| | |___| | | |  __/ (__|   <
  |_| |_| |_|\___|\__,_|_|\__,_|\____|_| |_|\___|\___|_|\_\

  http://github.com/sparkbox/mediaCheck

  Version: 0.4.6, 12-02-2015
  Author: Rob Tarr (http://twitter.com/robtarr)
*/
(function() {
  window.mediaCheck = function(options) {
    var breakpoints, checkQuery, convertEmToPx, createListener, getPXValue, hasMatchMedia, i, mmListener, mq, mqChange;
    mq = void 0;
    mqChange = void 0;
    createListener = void 0;
    convertEmToPx = void 0;
    getPXValue = void 0;
    hasMatchMedia = window.matchMedia !== undefined && !!window.matchMedia("!").addListener;
    if (hasMatchMedia) {
      mqChange = function(mq, options) {
        if (mq.matches) {
          if (typeof options.entry === "function") {
            options.entry(mq);
          }
        } else {
          if (typeof options.exit === "function") {
            options.exit(mq);
          }
        }
        if (typeof options.both === "function") {
          return options.both(mq);
        }
      };
      createListener = function() {
        mq = window.matchMedia(options.media);
        mq.addListener(function() {
          return mqChange(mq, options);
        });
        window.addEventListener("orientationchange", (function() {
          mq = window.matchMedia(options.media);
          return mqChange(mq, options);
        }), false);
        return mqChange(mq, options);
      };
      return createListener();
    } else {
      breakpoints = {};
      mqChange = function(mq, options) {
        if (mq.matches) {
          if (typeof options.entry === "function" && (breakpoints[options.media] === false || (breakpoints[options.media] == null))) {
            options.entry(mq);
          }
        } else {
          if (typeof options.exit === "function" && (breakpoints[options.media] === true || (breakpoints[options.media] == null))) {
            options.exit(mq);
          }
        }
        if (typeof options.both === "function") {
          options.both(mq);
        }
        return breakpoints[options.media] = mq.matches;
      };
      convertEmToPx = function(value) {
        var emElement, px;
        emElement = void 0;
        emElement = document.createElement("div");
        emElement.style.width = "1em";
        emElement.style.position = "absolute";
        document.body.appendChild(emElement);
        px = value * emElement.offsetWidth;
        document.body.removeChild(emElement);
        return px;
      };
      getPXValue = function(width, unit) {
        var value;
        value = void 0;
        switch (unit) {
          case "em":
            value = convertEmToPx(width);
            break;
          default:
            value = width;
        }
        return value;
      };
      for (i in options) {
        breakpoints[options.media] = null;
      }
      checkQuery = function(parts) {
        var constraint, dimension, matches, ratio, value, windowHeight, windowWidth;
        constraint = parts[1];
        dimension = parts[2];
        if (parts[4]) {
          value = getPXValue(parseInt(parts[3], 10), parts[4]);
        } else {
          value = parts[3];
        }
        windowWidth = window.innerWidth || document.documentElement.clientWidth;
        windowHeight = window.innerHeight || document.documentElement.clientHeight;
        if (dimension === 'width') {
          matches = constraint === "max" && value > windowWidth || constraint === "min" && value < windowWidth;
        } else if (dimension === 'height') {
          matches = constraint === "max" && value > windowHeight || constraint === "min" && value < windowHeight;
        } else if (dimension === 'aspect-ratio') {
          ratio = windowWidth / windowHeight;
          matches = constraint === "max" && eval(ratio) < eval(value) || constraint === "min" && eval(ratio) > eval(value);
        }
        return matches;
      };
      mmListener = function() {
        var matches, media, medias, parts, _i, _len;
        medias = options.media.split(/\sand\s|,\s/);
        matches = true;
        for (_i = 0, _len = medias.length; _i < _len; _i++) {
          media = medias[_i];
          parts = media.match(/\((.*?)-(.*?):\s([\d\/]*)(\w*)\)/);
          if (!checkQuery(parts)) {
            matches = false;
          }
        }
        return mqChange({
          media: options.media,
          matches: matches
        }, options);
      };
      if (window.addEventListener) {
        window.addEventListener("resize", mmListener, false);
      } else {
        if (window.attachEvent) {
          window.attachEvent("onresize", mmListener);
        }
      }
      return mmListener();
    }
  };

}).call(this);

// ====================================================================================================
// FILE: /source/js/utils/application.utils.js
// ====================================================================================================

(function(app, $, window, document, undefined) {
    'use strict';

    /* Cache Primary DOM elements
    --------------------------------------------------------------------------- */
    app.$win = $(window);
    app.$doc = $(document);
    app.$html = $('html');
    app.$head = $('head');
    app.$body = $('body');
    app.$container = $('.container');
    app.$header = $('global-header');
    app.$main = $('.main');
    app.$footer = $('.global-footer');

    app.isModernBrowser = !!('querySelector' in document && 'localStorage' in window && 'addEventListener' in window);
    app.touchOrClick = ('ontouchend' in window)? 'touchend' : 'click';

    /* Current assets path
    --------------------------------------------------------------------------- */
    var script = $('script').last().get(0);
    app.path = script.src.substr(0, script.src.lastIndexOf('/') - 2); // -2: remove 'js' from path

    String.prototype.supplant = function(o) {
        return this.replace(/{([^{}]*)}/g,
            function(a, b) {
                var r = o[b];
                return typeof r === 'string' || typeof r === 'number' ? r : a;
            }
        );
    };

    String.prototype.getExtension = function() {
        return this.split('.').pop();
    };

    Number.prototype.pad = function(place) {
        var n = place || 2;
        return ('0000000000' + this).slice(n * -1);
    };

    Date.prototype.formatted = function() {
        var date = new Date(this);
        return (date.getMonth() + 1).pad() + '/' + date.getDate().pad() + '/' + date.getFullYear() + ' @ ' + date.formatTime();
    };

    Date.prototype.formatTime = function() {
        var date = new Date(this);
        var hours = date.getHours();
        var minutes = date.getMinutes();
        var ampm = hours >= 12 ? 'pm' : 'am';
        hours = hours % 12;
        hours = hours ? hours : 12; // the hour '0' should be '12'
        return hours + ':' + minutes.pad() + ' ' + ampm;
    };

    Date.prototype.toRelativeTime = function(threshold) {
        var delta = new Date() - this,
            now_threshold = parseInt(threshold, 10),
            units = null,
            conversions = {
                millisecond: 1,     // ms    -> ms
                second:     1000,   // ms    -> sec
                minute:     60,     // sec   -> min
                hour:       60,     // min   -> hour
                day:        24,     // hour  -> day
                week:       7,      // day   -> week
                month:      4,      // week  -> month (roughly)
                year:       12      // month -> year
            };

        if (isNaN(now_threshold)) {
            now_threshold = 0;
        }

        if (delta <= now_threshold) {
            return 'Just now';
        }

        for (var key in conversions) {
            if (delta < conversions[key]) {
                break;
            }
            else {
                units = key; // keeps track of the selected key over the iteration
                delta = delta / conversions[key];
            }
        }

        // pluralize a unit when the difference is greater than 1.
        delta = Math.floor(delta);
        if (delta !== 1) { units += 's'; }
        return [delta, units, 'ago'].join(' ');
    };

    app.readable_byte = function(b) {
        var e = Math.log(b) / (10 * Math.LN2) | 0;
        return (Math.round(b / Math.pow(1024, e) * 100) / 100) + ['B', 'KB', 'MB', 'GB', 'TB', 'PB'][e];
    };

    app.param = function(name) {
        var param = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
        return (param) ? param[1] : null;
    };

})(window.app = window.app || {}, jQuery, window, document);

// ====================================================================================================
// FILE: /source/js/utils/css_browser_selector.js
// ====================================================================================================

/*
 CSS Browser Selector js v0.5.3 (July 2, 2013)

 -- original --
 Rafael Lima (http://rafael.adm.br)
 http://rafael.adm.br/css_browser_selector
 License: http://choosealicense.com/licenses/mit/
 Contributors: http://rafael.adm.br/css_browser_selector#contributors
 -- /original --

 Fork project: http://code.google.com/p/css-browser-selector/
 Song Hyo-Jin (shj at xenosi.de)
 */
function css_browser_selector(u) {
    var ua = u.toLowerCase(),
        is = function(t) {
            return ua.indexOf(t) > -1
        },
        g = 'gecko',
        w = 'webkit',
        s = 'safari',
        c = 'chrome',
        o = 'opera',
        m = 'mobile',
        v = 0,
        r = window.devicePixelRatio ? (window.devicePixelRatio + '').replace('.', '_') : '1';
    var res = [
        /* IE */
        (!(/opera|webtv/.test(ua)) && /msie\s(\d+)/.test(ua) && (v = RegExp.$1 * 1)) ?
            ('ie ie' + v + ((v == 6 || v == 7) ?
                ' ie67 ie678 ie6789' : (v == 8) ?
                ' ie678 ie6789' : (v == 9) ?
                ' ie6789 ie9m' : (v > 9 ) ?
                ' ie9m' : '')) :
            /* EDGE */
            (/edge\/(\d+)\.(\d+)/.test(ua) && (v = [RegExp.$1, RegExp.$2])) ?
            'ie ie' + v[0] + ' ie' + v[0] + '_' + v[1] + ' ie9m edge' :
                /* IE 11 */
                (/trident\/\d+.*?;\s*rv:(\d+)\.(\d+)\)/.test(ua) && (v = [RegExp.$1, RegExp.$2])) ?
                    'ie ie' + v[0] + ' ie' + v[0] + '_' + v[1] + ' ie9m' :
                    /* FF */
                    (/firefox\/(\d+)\.(\d+)/.test(ua) && (re = RegExp)) ?
                        g + ' ff ff' + re.$1 + ' ff' + re.$1 + '_' + re.$2 :
                        is('gecko/') ? g :
                            /* Opera - old */
                            is(o) ? 'old' + o + (/version\/(\d+)/.test(ua) ? ' ' + o + RegExp.$1 :
                                (/opera(\s|\/)(\d+)/.test(ua) ? ' ' + o + RegExp.$2 : '')) :
                                /* K */
                                is('konqueror') ? 'konqueror' :
                                    /* Black Berry */
                                    is('blackberry') ? m + ' blackberry' :
                                        /* Chrome */
                                        (is(c) || is('crios')) ? w + ' ' + c :
                                            /* Iron */
                                                is('iron') ? w + ' iron' :
                                                    /* Safari */
                                                    !is('cpu os') && is('applewebkit/') ? w + ' ' + s :
                                                        /* Mozilla */
                                                        is('mozilla/') ? g : '',
        /* Android */
        is('android') ? m + ' android' : '',
        /* Tablet */
        is('tablet') ? 'tablet' : '',
        /* blink or webkit engine browsers */
            /* Opera */
            is('opr/') ? o : '',
            /* Yandex */
            is('yabrowser') ? 'yandex' : '',
        /* Machine */
        is('j2me') ? m + ' j2me' :
            is('ipad; u; cpu os') ? m + ' chrome android tablet' :
                is('ipad;u;cpu os') ? m + ' chromedef android tablet' :
                    is('iphone') ? m + ' ios iphone' :
                        is('ipod') ? m + ' ios ipod' :
                            is('ipad') ? m + ' ios ipad tablet' :
                                is('mac') ? 'mac' :
                                    is('darwin') ? 'mac' :
                                        is('webtv') ? 'webtv' :
                                            is('win') ? 'win' + (is('windows nt 6.0') ? ' vista' : '') :
                                                is('freebsd') ? 'freebsd' :
                                                    (is('x11') || is('linux')) ? 'linux' : '',
        /* Ratio (Retina) */
        (r != '1') ? ' retina ratio' + r : '',
        'js portrait'].join(' ');
    if(window.jQuery && !window.jQuery.browser) {
        window.jQuery.browser = v ? {msie: 1, version: v} : {};
    }
    return res;
};
(function(d, w) {
    var _c = css_browser_selector(navigator.userAgent);
    var h = d.documentElement;
    h.className += ' ' + _c;
    var _d = _c.replace(/^\s*|\s*$/g, '').split(/ +/);
    w.CSSBS = 1;
    for(var i = 0; i < _d.length; i++) {
        w['CSSBS_' + _d[i]] = 1;
    }
    var _de = function(v) {
        return d.documentElement[v] || d.body[v];
    }
    if(w.jQuery) {
        (function($) {
            var p = 'portrait', l = 'landscape';
            var m = 'smartnarrow', mw = 'smartwide', t = 'tabletnarrow', tw = 'tabletwide', ac = m + ' ' + mw + ' ' + t + ' ' + tw + ' pc';
            var $h = $(h);
            var to = 0, cw = 0;

            /* ie7 cpu 100% fix */
            function CSSSelectorUpdateSize() {
                if(to != 0) return;
                try {
                    var _cw = _de('clientWidth'), _ch = _de('clientHeight');
                    if(_cw > _ch) {
                        $h.removeClass(p).addClass(l);
                    } else {
                        $h.removeClass(l).addClass(p);
                    }
                    if(_cw == cw) return;
                    cw = _cw;
                    //clearTimeout(to);
                } catch(e) {
                }
                to = setTimeout(CSSSelectorUpdateSize_, 100);
            }

            function CSSSelectorUpdateSize_() {
                try {
                    $h.removeClass(ac);
                    $h.addClass(
                        (cw <= 360) ? m :
                            (cw <= 640) ? mw :
                                (cw <= 768) ? t :
                                    (cw <= 1024) ? tw : 'pc'
                    );
                } catch(e) {
                }
                to = 0;
            }

            if(w.CSSBS_ie) {
                setInterval(CSSSelectorUpdateSize, 1000);
            } else {
                $(w).on('resize orientationchange', CSSSelectorUpdateSize).trigger('resize');
            }
            $(w).load(CSSSelectorUpdateSize);
        })(w.jQuery);
    }
})(document, window);

// ====================================================================================================
// FILE: /source/js/utils/jquery.ba-throttle-debounce.js
// ====================================================================================================

/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery throttle / debounce: Sometimes, less is more!
//
// *Version: 1.1, Last updated: 3/7/2010*
//
// Project Home - http://benalman.com/projects/jquery-throttle-debounce-plugin/
// GitHub       - http://github.com/cowboy/jquery-throttle-debounce/
// Source       - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.js
// (Minified)   - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.min.js (0.7kb)
//
// About: License
//
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
//
// About: Examples
//
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
//
// Throttle - http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/
// Debounce - http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/
//
// About: Support and Testing
//
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
//
// jQuery Versions - none, 1.3.2, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-throttle-debounce/unit/
//
// About: Release History
//
// 1.1 - (3/7/2010) Fixed a bug in <jQuery.throttle> where trailing callbacks
//       executed later than they should. Reworked a fair amount of internal
//       logic as well.
// 1.0 - (3/6/2010) Initial release as a stand-alone project. Migrated over
//       from jquery-misc repo v0.4 to jquery-throttle repo v1.0, added the
//       no_trailing throttle parameter and debounce functionality.
//
// Topic: Note for non-jQuery users
//
// jQuery isn't actually required for this plugin, because nothing internal
// uses any jQuery methods or properties. jQuery is just used as a namespace
// under which these methods can exist.
//
// Since jQuery isn't actually required for this plugin, if jQuery doesn't exist
// when this plugin is loaded, the method described below will be created in
// the `Cowboy` namespace. Usage will be exactly the same, but instead of
// $.method() or jQuery.method(), you'll need to use Cowboy.method().

(function(window, undefined) {
    '$:nomunge'; // Used by YUI compressor.

    // Since jQuery really isn't required for this plugin, use `jQuery` as the
    // namespace only if it already exists, otherwise use the `Cowboy` namespace,
    // creating it if necessary.
    var $ = window.jQuery || window.Cowboy || (window.Cowboy = {});
    // Internal method reference.
    var jq_throttle;

    // Method: jQuery.throttle
    //
    // Throttle execution of a function. Especially useful for rate limiting
    // execution of handlers on events like resize and scroll. If you want to
    // rate-limit execution of a function to a single time, see the
    // <jQuery.debounce> method.
    //
    // In this visualization, | is a throttled-function call and X is the actual
    // callback execution:
    //
    // > Throttled with `no_trailing` specified as false or unspecified:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // > X    X    X    X    X    X        X    X    X    X    X    X
    // >
    // > Throttled with `no_trailing` specified as true:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // > X    X    X    X    X             X    X    X    X    X
    //
    // Usage:
    //
    // > var throttled = jQuery.throttle( delay, [ no_trailing, ] callback );
    // >
    // > jQuery('selector').bind( 'someevent', throttled );
    // > jQuery('selector').unbind( 'someevent', throttled );
    //
    // This also works in jQuery 1.4+:
    //
    // > jQuery('selector').bind( 'someevent', jQuery.throttle( delay, [ no_trailing, ] callback ) );
    // > jQuery('selector').unbind( 'someevent', callback );
    //
    // Arguments:
    //
    //  delay - (Number) A zero-or-greater delay in milliseconds. For event
    //    callbacks, values around 100 or 250 (or even higher) are most useful.
    //  no_trailing - (Boolean) Optional, defaults to false. If no_trailing is
    //    true, callback will only execute every `delay` milliseconds while the
    //    throttled-function is being called. If no_trailing is false or
    //    unspecified, callback will be executed one final time after the last
    //    throttled-function call. (After the throttled-function has not been
    //    called for `delay` milliseconds, the internal counter is reset)
    //  callback - (Function) A function to be executed after delay milliseconds.
    //    The `this` context and all arguments are passed through, as-is, to
    //    `callback` when the throttled-function is executed.
    //
    // Returns:
    //
    //  (Function) A new, throttled, function.

    $.throttle = jq_throttle = function(delay, no_trailing, callback, debounce_mode) {
        // After wrapper has stopped being called, this timeout ensures that
        // `callback` is executed at the proper times in `throttle` and `end`
        // debounce modes.
        var timeout_id;
        // Keep track of the last time `callback` was executed.
        var last_exec = 0;

        // `no_trailing` defaults to falsy.
        if (typeof no_trailing !== 'boolean') {
            debounce_mode = callback;
            callback = no_trailing;
            no_trailing = undefined;
        }

        // The `wrapper` function encapsulates all of the throttling / debouncing
        // functionality and when executed will limit the rate at which `callback`
        // is executed.
        function wrapper() {
            var that = this;
            var elapsed = +new Date() - last_exec;
            var args = arguments;

            // Execute `callback` and update the `last_exec` timestamp.
            function exec() {
                last_exec = +new Date();
                callback.apply(that, args);
            }

            // If `debounce_mode` is true (at_begin) this is used to clear the flag
            // to allow future `callback` executions.
            function clear() {
                timeout_id = undefined;
            }

            if (debounce_mode && !timeout_id) {
                // Since `wrapper` is being called for the first time and
                // `debounce_mode` is true (at_begin), execute `callback`.
                exec();
            }

            // Clear any existing timeout.
            if (timeout_id) {
                clearTimeout(timeout_id);
            }

            if (debounce_mode === undefined && elapsed > delay) {
                // In throttle mode, if `delay` time has been exceeded, execute
                // `callback`.
                exec();

            } else if (no_trailing !== true) {
                // In trailing throttle mode, since `delay` time has not been
                // exceeded, schedule `callback` to execute `delay` ms after most
                // recent execution.
                //
                // If `debounce_mode` is true (at_begin), schedule `clear` to execute
                // after `delay` ms.
                //
                // If `debounce_mode` is false (at end), schedule `callback` to
                // execute after `delay` ms.
                timeout_id = setTimeout(debounce_mode ? clear : exec, debounce_mode === undefined ? delay - elapsed : delay);
            }
        }

        // Set the guid of `wrapper` function to the same of original callback, so
        // it can be removed in jQuery 1.4+ .unbind or .die by using the original
        // callback as a reference.
        if ($.guid) {
            wrapper.guid = callback.guid = callback.guid || $.guid++;
        }

        // Return the wrapper function.
        return wrapper;
    };

    // Method: jQuery.debounce
    //
    // Debounce execution of a function. Debouncing, unlike throttling,
    // guarantees that a function is only executed a single time, either at the
    // very beginning of a series of calls, or at the very end. If you want to
    // simply rate-limit execution of a function, see the <jQuery.throttle>
    // method.
    //
    // In this visualization, | is a debounced-function call and X is the actual
    // callback execution:
    //
    // > Debounced with `at_begin` specified as false or unspecified:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // >                          X                                 X
    // >
    // > Debounced with `at_begin` specified as true:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // > X                                 X
    //
    // Usage:
    //
    // > var debounced = jQuery.debounce( delay, [ at_begin, ] callback );
    // >
    // > jQuery('selector').bind( 'someevent', debounced );
    // > jQuery('selector').unbind( 'someevent', debounced );
    //
    // This also works in jQuery 1.4+:
    //
    // > jQuery('selector').bind( 'someevent', jQuery.debounce( delay, [ at_begin, ] callback ) );
    // > jQuery('selector').unbind( 'someevent', callback );
    //
    // Arguments:
    //
    //  delay - (Number) A zero-or-greater delay in milliseconds. For event
    //    callbacks, values around 100 or 250 (or even higher) are most useful.
    //  at_begin - (Boolean) Optional, defaults to false. If at_begin is false or
    //    unspecified, callback will only be executed `delay` milliseconds after
    //    the last debounced-function call. If at_begin is true, callback will be
    //    executed only at the first debounced-function call. (After the
    //    throttled-function has not been called for `delay` milliseconds, the
    //    internal counter is reset)
    //  callback - (Function) A function to be executed after delay milliseconds.
    //    The `this` context and all arguments are passed through, as-is, to
    //    `callback` when the debounced-function is executed.
    //
    // Returns:
    //
    //  (Function) A new, debounced, function.

    $.debounce = function(delay, at_begin, callback) {
        return (callback === undefined)? jq_throttle(delay, at_begin, false) : jq_throttle(delay, callback, at_begin !== false);
    };

})(this);

// ====================================================================================================
// FILE: /source/js/utils/jquery.easing.js
// ====================================================================================================

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing.jswing = jQuery.easing.swing;

jQuery.extend(jQuery.easing,
{
    def: 'easeOutQuad',
    swing: function(x, t, b, c, d) {
        return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
    },
    easeInQuad: function(x, t, b, c, d) {
        return c * (t /= d) * t + b;
    },
    easeOutQuad: function(x, t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b;
    },
    easeInOutQuad: function(x, t, b, c, d) {
        if ((t /= d / 2) < 1) { return c / 2 * t * t + b; }
        return -c / 2 * ((--t) * (t - 2) - 1) + b;
    }
});

// ====================================================================================================
// FILE: /source/js/utils/jquery.oncssanimationend.js
// ====================================================================================================

/*
    By Osvaldas Valutis, www.osvaldas.info
    Available for use under the MIT License
*/

;(function($, window, document, undefined) {
    var doc = document.body || document.documentElement, s = doc.style, prefixAnimation = '', prefixTransition = '';

    if (s.WebkitAnimation === '') { prefixAnimation = '-webkit-'; }
    if (s.MozAnimation === '') { prefixAnimation = '-moz-'; }
    if (s.OAnimation === '') { prefixAnimation = '-o-'; }

    if (s.WebkitTransition === '') { prefixTransition = '-webkit-'; }
    if (s.MozTransition === '') { prefixTransition = '-moz-'; }
    if (s.OTransition === '') { prefixTransition = '-o-'; }

    $.fn.extend({
        onCSSAnimationEnd: function(callback){
            var $this = $(this).eq(0);
            $this.one('webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend', callback);
            if ((prefixAnimation === '' && !('animation' in s)) || $this.css(prefixAnimation + 'animation-duration' ) === '0s') { callback(); }
            return this;
        },
        onCSSTransitionEnd: function(callback) {
            var $this = $(this).eq(0);
            $this.one('webkitTransitionEnd mozTransitionEnd oTransitionEnd otransitionend transitionend', callback );
            if ((prefixTransition === '' && !('transition' in s)) || $this.css( prefixTransition + 'transition-duration') === '0s' ) { callback(); }
            return this;
        }
    });
})( jQuery, window, document );

// ====================================================================================================
// FILE: /source/js/utils/pubsub.js
// ====================================================================================================

/* Simple PubSub
==================================================================================================== */

(function(d) {

    // the topic/subscription hash
    var cache = d.c_ || {};

    d.publish = function(topic, args) {
        // summary:
        //      Publish some data on a named topic.
        // topic: String
        //      The channel to publish on
        // args: Array?
        //      The data to publish. Each array item is converted into an ordered
        //      arguments on the subscribed functions.
        //
        // example:
        //      Publish stuff on '/some/topic'. Anything subscribed will be called
        //      with a function signature like: function(a,b,c){ ... }
        //
        //      publish("/some/topic", ["a","b","c"]);

        var subs = cache[topic];
        var len = subs ? subs.length : 0;

        //can change loop or reverse array if the order matters
        while (len--) {
            subs[len].apply(d, args || []);
        }
    };

    d.subscribe = function(topic, callback) {

        // summary:
        //      Register a callback on a named topic.
        // topic: String
        //      The channel to subscribe to
        // callback: Function
        //      The handler event. Anytime something is publish'ed on a
        //      subscribed channel, the callback will be called with the
        //      published array as ordered arguments.
        //
        // returns: Array
        //      A handle which can be used to unsubscribe this particular subscription.
        //
        // example:
        //      subscribe("/some/topic", function(a, b, c){ /* handle data */ });

        if (!cache[topic]) {
            cache[topic] = [];
        }

        cache[topic].push(callback);
        return [topic, callback];
    };

    d.unsubscribe = function(handle) {
        // summary:
        //      Disconnect a subscribed function for a topic.
        // handle: Array
        //      The return value from a subscribe call.
        // example:
        //      var handle = subscribe("/some/topic", function(){});
        //      unsubscribe(handle);

        var subs = cache[handle[0]];
        var callback = handle[1];
        var len = subs ? subs.length : 0;

        while (len--) {
            if (subs[len] === callback) {
                subs.splice(len, 1);
            }
        }
    };

})(this);

// ====================================================================================================
// FILE: /source/js/modules/module--banner.js
// ====================================================================================================

/*global files, swfobject, readable_byte */
(function(app, $, window, document, undefined) {
    'use strict';

    /* Cache DOM Elements
    ==================================================================================================== */
    var assetsBanners = 'banners/';
    var $ad_container = $('.ad-container');
    var $file_meta = $('.file-meta span');
    var sizeRegExp = new RegExp('(\\d{2,}x\\d{2,})', 'g');
    var currentBanner;

    /* Banner
    ==================================================================================================== */
    app.banner = (function() {
        var index = null;
        var meta_tpl = '<small><em>FILESIZE:</em></small> <strong>{size}</strong> | <small><em>MODIFIED:</em></small> <strong><abbr data-tooltip="{date-formatted}">{date}</abbr></strong>';

        /* Helper Functions
        --------------------------------------------------------------------------- */
        var isBannerDimensionsEqual = function() {
            return !!(Number($ad_container.width()) === Number(currentBanner.width) && Number($ad_container.height()) === Number(currentBanner.height));
        };

        var cacheBuster = function(img) {
            return '?cache=' + Date.now();
        };

        /* Internal Functions
        --------------------------------------------------------------------------- */
        function resizeBanner() {
            var _tab = this;
            var idx = _tab.idx;
            var dimensions = _tab.text().match(sizeRegExp)[0].split('x');
            currentBanner = {
                file: assetsBanners + _tab.text(),
                type: _tab.data('type'),
                width: dimensions[0],
                height: dimensions[1],
                filesize: _tab.data('filesize'),
                modified: _tab.data('modified')
            };
            // remove existing banner
            $ad_container.children().fadeOut('fast', function() {
                $file_meta.fadeOut(350);

                // if banners are same size, change to new banner
                if (isBannerDimensionsEqual()) {
                    changeBanner();
                }
                // trigger banner container resize; change banner
                else {
                    $ad_container.css({'width': currentBanner.width, 'height': currentBanner.height}).onCSSTransitionEnd(changeBanner);
                }
            });
        }

        function changeBanner() {
            switch (currentBanner.type) {
                case 'iframe': displayIframeBanner(); break;
                default: displayImageBanner(); break;
            }
            displayFileMeta();
            app.$win.trigger('resize');
        }

        function displayIframeBanner() {
            $ad_container.find('iframe').attr({
                'src': currentBanner.file + '/index.html' + cacheBuster(currentBanner.file),
                'width': currentBanner.width,
                'height': currentBanner.height
            }).delay(250).fadeIn(350);
        }

        function displayImageBanner() {
            // $ad_container.html($('<img>', {
            //     'src': currentBanner.file + cacheBuster(currentBanner.file),
            //     'width': currentBanner.width,
            //     'height': currentBanner.height
            // }).hide().fadeIn(350));
        }

        function displayFileMeta() {
            $file_meta.html(meta_tpl.supplant({
                'size': app.readable_byte(currentBanner.filesize),
                'date': new Date(currentBanner.modified).toRelativeTime(),
                'date-formatted': new Date(currentBanner.modified).formatted()
            })).hide().fadeIn(350);
        }

        /* Public Functions
        --------------------------------------------------------------------------- */
        return {
            resize: resizeBanner,
            change: changeBanner
        };
    })();

    /* Event Triggers
    ==================================================================================================== */
    $('.btn-reload-banner').on('click', function() {
        $ad_container.find('iframe')[0].contentWindow.location.reload(true);
    });

    $(window).on('load', function() {
        var $tabs = $('.tabs');
        var paramTab = parseInt(app.param('tab'), 10) - 1 || 0; // adjust for zero-based index
        var activeTab = Math.max(0, Math.min(paramTab, $tabs.children('.tab').length - 1)); // clamp between values
        $tabs.find(':radio').prop('checked', false).eq(activeTab).prop('checked', true);

        var iframeSize = $tabs.find(':radio:checked');
        $(iframeSize).trigger('click');

        if (window.location.hash.slice(1) === 'controls') {
            $('.btn-reload-banner').hide();
            $.getScript('assets/_banner-support-files/controls/_banners.js');
        }
    });

})(window.app = window.app || {}, $, window, document);

// ====================================================================================================
// FILE: /source/js/modules/page--index.js
// ====================================================================================================

/* global subscribe */
(function(app, $, window, document, undefined) {
    'use strict';

    /* Cache Elements
    --------------------------------------------------------------------------- */
    var docElem = window.document.documentElement;
    var docscroll = 0;

    var $showMenu = $('.show-menu');
    var $perspectiveWrapper = $('.perspective');
    var $container = $perspectiveWrapper.find('.container');
    var $contentWrapper = $container.find('.content-wrapper');

    var tabsWidth = 0;
    var $tabsContainer = $('.tabs');
    var $tabs = $tabsContainer.find('.tab');
    var $singleTab = $tabsContainer.find('.single-tab');
    var $mobileNavigation = $('nav.navigation');

    /* Utils
    --------------------------------------------------------------------------- */
    function scrollY() {
        return window.pageYOffset || docElem.scrollTop;
    }

    /* Show Off-Canvas Menu
    --------------------------------------------------------------------------- */
    $showMenu.on('click', function() {
        if ($('body').hasClass('animate')) { return; }

        docscroll = scrollY();
        // change top of contentWrapper
        $contentWrapper.css('top', docscroll * -1 + 'px');
        // mac chrome issue:
        document.body.scrollTop = document.documentElement.scrollTop = 0;

        $perspectiveWrapper.addClass('modalview');
        setTimeout(function() { $('body').addClass('animate'); }, 25);
    });

    $container.on('click', function() {
        if (!$('body').hasClass('animate')) { return; }

        $container.onCSSTransitionEnd(function() {
            if ($('body').hasClass('animate')) { return; }
            $perspectiveWrapper.removeClass('modalview');
            // mac chrome issue:
            document.body.scrollTop = document.documentElement.scrollTop = docscroll;
            // change top of contentWrapper
            $contentWrapper.css('top', 0);
        });
        $('body').removeClass('animate');
    });

    subscribe('resize/start', function() {
        if ($('body').is('.animate')) {
            $showMenu.trigger('click');
        }
    });

    /* Event Listener: Toggle Off-Canvas Menu Button
    --------------------------------------------------------------------------- */
    var $tabsClone = [];
    $tabs.each(function(i, tab) {
        var isChecked = $(tab).find('input:radio').is(':checked');
        var active = (isChecked)? ' class="active"' : '';
        var a = '<a href="#"' + active + '>' + tab.textContent + '</a>';
        $tabsClone.push(a);
    });
    $mobileNavigation.html($tabsClone.join('')).on('click', 'a', function(e) {
        e.preventDefault();
        $singleTab.find('span').text(this.textContent);
        $mobileNavigation.find('a').filter('.active').removeClass('active').end().filter(this).addClass('active');

        var evt = (e.originalEvent)? 'real' : 'simulated';
        if (evt === 'real') {
            var idx = $(e.currentTarget).index();
            $tabs.eq(idx).find('input:radio').trigger('click');
        }
    });

    /* Get max width of all tabs; hide main tabs, if container is narrower
    --------------------------------------------------------------------------- */
    $tabs.each(function(i, tab) {
        tabsWidth += $(tab).outerWidth() + 4;
    });

    $(window).on('resize', function() {
        if ($tabsContainer.width() <= tabsWidth) {
            $tabs.hide();
            $singleTab.css('display', 'inline-block');
        }
        else {
            $tabs.css('display', 'inline-block');
            $singleTab.hide();
        }
    }).trigger('resize');

    /* Trigger first tab
    --------------------------------------------------------------------------- */
    $tabs.find('input:radio').on('click', function(e) {
        var _tab = $(this).parent();
        _tab.idx = $(this).parent().index();
        app.banner.resize.call(_tab);
        $mobileNavigation.find('a').eq(_tab.idx).trigger('click');
    });

    var $banner = $('.banner');
    var $bannerContent = $banner.find('iframe.banner-content');
    var $btnZoom = $('.js-btn-zoom');

    app.$win.on('resize', function() {
        var hasOverflow = $banner.get(0).scrollWidth > $banner.width();
        $btnZoom[(hasOverflow)? 'addClass' : 'removeClass']('active');
    }).trigger('resize');

    $btnZoom.on('click', function() {
        window.open($bannerContent.attr('src'), '_blank');
    });

})(window.app = window.app || {}, $, window, document);

// ====================================================================================================
// FILE: /source/js/modules/application.js
// ====================================================================================================

/* global publish, subscribe */
(function(app, $, window, document, undefined) {
    'use strict';

    var DELAY = 250;
    app.MOBILE_SWITCH_WIDTH = 900;
    app.win_width = app.$win.width();

    app.isDesktop = function() {
        return app.$win.width() > app.MOBILE_SWITCH_WIDTH;
    };


    /* Global Event Listeners / Triggers
    --------------------------------------------------------------------------- */
    app.$win.resize($.debounce(DELAY, true,
        function() {
            if (app.$win.width() !== app.win_width) {
                publish('resize/start');
            }
            app.win_width = app.$win.width();
        }
    ));

    app.$win.resize($.debounce(DELAY,
        function() {
            publish('resize/end');
        }
    ));

    app.$win.scroll($.debounce(DELAY, true,
        function() {
            publish('scroll/start');
        }
    ));

    app.$win.scroll($.debounce(DELAY,
        function() {
            publish('scroll/end');
        }
    ));

    $(window).load(function() {
        setTimeout(function() {
            publish('window/load');
        }, 250);
    });

    publish('page/load');

})(window.app = window.app || {}, $, window, document);
